
  <table width="100%">
    <tr>
      <td width="25%">
        <!--%= @profile["picture"] %-->
      <% if @profile.image.url %>
        <%= link_to @profile.image.url do %>
          <%= image_tag @profile.image.url%>
        <% end %>
      <% end %>
      </td>
      <td>
        <ul class="list-inline">
          <li id="profile-name" class="list-inline-item"><%= @user[:user]["name"] %> </li>
          <li id="profile-email" class="list-inline-item"><%= @user[:user]["email"] %></li>
          <% if @user[:user]["id"] == session["warden.user.user.key"][0][0] %>
          <button type="button" class="btn btn-outline-secondary list-inline-item" data-toggle="modal" data-target="#editModal"><i class="fas fa-edit"></i></i></button>
          <% end %>
          <% if can? :manage, @profile %>
            <button type="button" class="btn btn-secondary list-inline-item" data-toggle="modal" data-target="#adminModal"><i class="fas fa-user-cog"></i></button>
          <% end %>
        </ul>
        <p id="profile-location"><%= @profile["city"] %>, <%= @profile["country"] %></p>
        <hr>
          <p id="profile-biography"><%= @profile["biography"] %></p>
      </td>
    </tr>
  </table>

  <br>

  <ul id="profile-navtab" class="nav nav-tabs nav-fill">
    <%= link_to rants_path, class: "nav-item", remote: true do %>
      <li id="profile-tab" class="nav-item">
        <i id="profile-tab-link" class="nav-link">Rants</i>
      </li>
    <% end %>
    <%= link_to activity_path, class: "nav-item", remote: true do %>
      <li id="profile-tab" class="nav-item">
        <i id="profile-tab-link" class="nav-link">Activity</i>
      </li>
    <% end %>
  </ul>



<div id="profile_content">
  
  <br>
  <ul class="list-unstyled">

      <% @user[:posts].each do |post| %>

      <%= link_to rant_path(post["id"]) do %>
        <li class="media">
          <img src="..." class="align-self-center mr-3" alt="...">
          <div class="media-body">
            <table width="100%"><tr width=100%>
              <td width="90%" id="post">
                <ul class="list-inline">
                  <li class="list-inline-item post-title"><%= post["title"] %></li>
                  <!--li class="list-inline-item post-info"><%= User.find(post["user_id"]).email %></li-->
                </ul>
                <ul class="list-inline">
                  <li class="list-inline-item post-info"><%= post["creation_date"] %></li>
                  <li class="list-inline-item post-info">Comments: <%= post["comments"] %></li>
                </ul>
              </td>
              <td width="5%" id="votes">
                <i id="vote" class="fas fa-caret-up"></i>
                  <p><%= post["votes"] %></p>
                <i id="vote" class="fas fa-caret-down"></i>
              </td>
              <td width="10%" id="votes">
              </td>
            </tr></table>
        </li>
      <% end %>

      <% end %>
    </ul>
</div>

<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <ul class="list-inline">
          <h5 class="modal-title list-inline-item" id="exampleModalLabel">Edit profile</h5>
        </ul>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= form_with(model: @profile, local: true) do |form| %>
          <% if @profile.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(profile.errors.count, "error") %> prohibited this profile from being saved:</h2>

              <ul>
              <% profile.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
              </ul>
            </div>
          <% end %>

          <div>
            <%= form.file_field :picture %>
          </div>

          <div class="field">
            <%= form.label :biography %>
            <%= form.text_area :biography %>
          </div>

          <div class="field">
            <%= form.label :city %>
            <%= form.text_field :city %>
          </div>

          <div class="field">
            <%= form.label :country %>
            <%= form.text_field :country %>
          </div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Close</button>
        <!--button type="button" class="btn btn-outline-info">Save changes</button-->
        <%= form.submit "Save changes", class: "btn btn-outline-info"  %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="adminModal" tabindex="-1" role="dialog" aria-labelledby="adminModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <ul class="list-inline">
          <h5 class="modal-title list-inline-item" id="exampleModalLabel">User details</h5>
        </ul>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Last access:</p>
        <p>User role: </p>
        <ul class="list-inline">
          <li class="list-inline-item"><button class="btn btn-secondary">Make Admin</button></li>
          <li class="list-inline-item"><button class="btn btn-secondary">Change password</button></li>
          <li class="list-inline-item"><button class="btn btn-danger">Delete user</button></li>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-outline-info">Save changes</button>
      </div>
    </div>
  </div>
</div>